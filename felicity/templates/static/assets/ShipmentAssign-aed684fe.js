import{d as P,b3 as $,V as z,t as v,Q as G,r as O,N as w,o as a,c as i,b as e,f as d,F as h,y as g,x as n,u,aa as Q,e as y,w as S,h as C,G as U,v as A,ab as b,z as H,A as J}from"./index-22e9c43e.js";import V from"./Button-39c9cd5e.js";import{u as K}from"./shipment-8e3726f3.js";const W={class:"overflow-x-auto mt-4"},X={action:"post",class:"p-1"},Y={class:"flex justify-start mb-4"},Z={class:"flex justify-between items-center"},ee=e("span",{class:"text-gray-700 mr-2 whitespace-nowrap"},"Sample Type",-1),te=["value"],se={class:"ml-6 mt-2"},oe={class:"overflow-x-auto mt-4"},ae={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},ie={key:0,class:"py-4 text-center"},ne={key:1,class:"min-w-full"},re={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},de=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1),le=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1),ce=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample Type ",-1),pe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Client Sample ID ",-1),he=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1),ue=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Created ",-1),_e=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Received ",-1),me=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1),ge={class:"bg-white"},ye=["onUpdate:modelValue","onChange"],be=e("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1),xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},fe={class:"text-sm leading-5 text-sky-800 font-semibold"},ke={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ve={class:"text-sm leading-5 text-sky-800 font-semibold"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Se={class:"text-sm leading-5 text-sky-800 font-semibold"},Ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ue={class:"text-sm leading-5 text-sky-800"},Ae=["onUpdate:modelValue","disabled"],Ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Te={class:"text-sm leading-5 text-sky-800"},De={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Re={class:"text-sm leading-5 text-sky-800"},Fe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Be={class:"text-sm leading-5 text-sky-800"},Ee={class:"my-4"},je=P({__name:"ShipmentAssign",setup(Ie){const T=H(()=>J(()=>import("./LoadingMessage-2cc5bc49.js"),["assets/LoadingMessage-2cc5bc49.js","assets/LoadingMessage.vue_vue_type_script_setup_true_lang-08d2c319.js","assets/index-22e9c43e.js","assets/index-5bc4f6f2.css"])),l=$(),x=z(),{manageSamples:D}=K();l.fetchReferralLaboratories();const R=v(()=>l.getShipment);x.fetchSampleTypes();const _=G({sampleTypeUid:void 0,analysisUid:void 0}),c=O(!1),f=v(()=>{const t=[];return l.getSamples?.forEach(p=>{t?.some(m=>m.uid===p.uid)||t.push(p)}),t}),F=()=>{k(),l.fetchFoShipmentAssign({first:50,after:"",text:"",sortBy:void 0,..._})},B=()=>{const t=E();D(R?.value?.uid,t,"assign")};function k(){return l.samples?.filter(t=>t.checked)}function E(){return k().map(t=>({sampleUid:t.uid,shipedSampleUid:void 0,analyses:t.analysisResults?.filter(o=>o.checked)?.map(o=>o.uid)}))?.filter(t=>t?.analyses?.length>0)}function I(t){j()?c.value=!0:c.value=!1}function M(t){t.checked=!0}function L(t){t.checked=!1}async function N(){await f?.value?.forEach(t=>c.value?M(t):L(t))}function j(){return f?.value?.every(t=>t.checked===!0)}return(t,o)=>{const p=w("motion-slide-left"),m=w("motion-slide-right");return a(),i(h,null,[e("div",W,[d((a(),i("form",X,[e("div",Y,[e("label",Z,[ee,d(e("select",{name:"analyses_uids","onUpdate:modelValue":o[0]||(o[0]=s=>_.sampleTypeUid=s),class:"form-input mt-1 block w-full py-1"},[(a(!0),i(h,null,g(u(x).sampleTypes,s=>(a(),i("option",{key:s.uid,value:s.uid},n(s.name),9,te))),128))],512),[[Q,_.sampleTypeUid]])]),e("div",se,[d(y(V,{onClick:o[1]||(o[1]=U(s=>F(),["prevent"])),color:"sky-800",class:"p-1"},{default:S(()=>[C("Apply Filters")]),_:1},512),[[A,!0]])])])])),[[p]])]),e("div",oe,[e("div",ae,[u(l).fetchingSamples?(a(),i("div",ie,[y(u(T),{message:"Fetching samples ..."})])):(a(),i("table",ne,[e("thead",null,[e("tr",null,[e("th",re,[d(e("input",{type:"checkbox",onChange:N,"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s)},null,544),[[b,c.value]])]),de,le,ce,pe,he,ue,_e,me])]),d((a(),i("tbody",ge,[(a(!0),i(h,null,g(u(l).samples,s=>(a(),i("tr",{key:s?.uid},[e("td",null,[d(e("input",{type:"checkbox","onUpdate:modelValue":r=>s.checked=r,onChange:r=>I()},null,40,ye),[[b,s.checked]])]),be,e("td",xe,[e("div",fe,n(s?.sampleId),1)]),e("td",ke,[e("div",ve,n(s?.sampleType?.name),1)]),e("td",we,[e("div",Se,n(s?.analysisRequest?.clientRequestId),1)]),e("td",Ce,[e("div",Ue,[e("ul",null,[(a(!0),i(h,null,g(s?.analysisResults,r=>(a(),i("li",{class:"flex justify-start items-center",key:r.uid},[d(e("input",{type:"checkbox","onUpdate:modelValue":q=>r.checked=q,class:"mr-2",disabled:!s.checked},null,8,Ae),[[b,r.checked]]),e("span",null,n(r?.analysis?.name),1),e("span",null,n(r?.status),1)]))),128))])])]),e("td",Ve,[e("div",Te,n(s?.createdAt),1)]),e("td",De,[e("div",Re,n(s?.dateReceived),1)]),e("td",Fe,[e("div",Be,n(s?.status),1)])]))),128))])),[[m]])]))])]),e("section",Ee,[d(y(V,{onClick:U(B,["prevent"]),color:"orange-600"},{default:S(()=>[C("Assign Samples")]),_:1},512),[[A,!0]])])],64)}}});export{je as default};
