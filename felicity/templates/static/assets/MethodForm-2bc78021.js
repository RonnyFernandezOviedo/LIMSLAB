import{d as S,a9 as N,S as O,ar as T,Q as B,D as C,t as y,r as _,o as j,c as H,b as s,f as c,H as m,e as k,u as d,I as w,G as R,z as F,A as G,B as P}from"./index-08b76645.js";import{i as z,j as K}from"./instrument.mutations-bf28dbb3.js";/* empty css                                                                 */const L={action:"post",class:"p-1"},Q={class:"grid grid-cols-3 gap-x-4 mb-4"},q={class:"block col-span-2 mb-2"},J=s("span",{class:"text-gray-700"},"Nombre Metodo",-1),W={class:"block col-span-1 mb-2"},X=s("span",{class:"text-gray-700"},"keyword",-1),Y={class:"grid grid-cols-2 gap-x-4 mb-4"},Z={class:"block col-span-2 mb-2"},$=s("span",{class:"text-gray-700"},"Analisis",-1),ee={class:"block col-span-2 mb-2"},se=s("span",{class:"text-gray-700"},"Instrumento",-1),te={class:"block col-span-2 mb-2"},oe=s("span",{class:"text-gray-700"},"Descripcion",-1),ae=s("hr",null,null,-1),de=S({__name:"MethodForm",props:{method:Object,methodUid:Number,analysis:Object,analysisUid:Number},emits:["close"],setup(g,{emit:x}){const p=F(()=>G(()=>import("./vue-multiselect.esm-c34588a0.js"),["assets/vue-multiselect.esm-c34588a0.js","assets/index-08b76645.js","assets/index-5bc4f6f2.css"])),M=N(),u=O(),{withClientMutation:b}=P(),f=g,{method:i,analysis:r}=T(f),t=B({...i?.value});C(()=>f.analysisUid,(o,e)=>{});const h=x,v=y(()=>M.getAnalysesServicesSimple);let l=_([]);r?.value?.uid!==void 0?l.value.push(r.value):v.value?.forEach(o=>{o?.methods?.some(e=>e.uid==i?.value?.uid)&&l.value.push(o)}),u.fetchInstruments();const V=y(()=>u.getInstruments);let n=_([]);const A=()=>{const o=[];return i?.value?.instruments?.forEach(e=>{r?.value?.instruments?.some(I=>I?.uid===e?.uid)&&o.push(e)}),o};n.value=A(),i?.value?.uid!==void 0&&i?.value?.instruments?.forEach(o=>n.value.push(o));function D(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};b(z,{payload:o},"createMethod").then(e=>{h("close"),u.addMethod(e)})}function E(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};b(K,{uid:t?.uid,payload:o},"updateMethod").then(e=>{h("close"),u.updateMethod(e)})}function U(){i?.value?.uid||D(),i?.value?.uid&&E()}return(o,e)=>(j(),H("form",L,[s("div",Q,[s("label",q,[J,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[0]||(e[0]=a=>t.name=a),placeholder:"Nombre ..."},null,512),[[m,t.name]])]),s("label",W,[X,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=a=>t.keyword=a),placeholder:"Keyword ..."},null,512),[[m,t.keyword]])])]),s("div",Y,[s("label",Z,[$,k(d(p),{modelValue:d(l),"onUpdate:modelValue":e[2]||(e[2]=a=>w(l)?l.value=a:l=a),options:v.value,multiple:!0,searchable:!0,label:"name","track-by":"uid",disabled:d(r)?.uid!=null},null,8,["modelValue","options","disabled"])]),s("label",ee,[se,k(d(p),{modelValue:d(n),"onUpdate:modelValue":e[3]||(e[3]=a=>w(n)?n.value=a:n=a),options:V.value,multiple:!0,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])]),s("label",te,[oe,c(s("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=a=>t.description=a),placeholder:"Descripcion ..."},null,512),[[m,t.description]])])]),ae,s("button",{type:"button",onClick:e[5]||(e[5]=R(a=>U(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Guardar forma ")]))}});export{de as default};
