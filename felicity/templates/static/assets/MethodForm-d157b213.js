import{d as S,a9 as C,S as N,ao as O,Q as R,D as T,t as _,r as y,o as B,c as j,b as s,f as d,H as u,e as k,u as r,I as x,G as H,z as F,A as G,B as P}from"./index-7e8465c2.js";import{i as z,j as L}from"./instrument.mutations-8004381b.js";/* empty css                                                                 */const Q={action:"post",class:"p-1"},q={class:"grid grid-cols-3 gap-x-4 mb-4"},J={class:"block col-span-2 mb-2"},K=s("span",{class:"text-gray-700"},"Nombre Metodo",-1),W={class:"block col-span-1 mb-2"},X=s("span",{class:"text-gray-700"},"Codigo",-1),Y={class:"grid grid-cols-2 gap-x-4 mb-4"},Z={class:"block col-span-2 mb-2"},$=s("span",{class:"text-gray-700"},"Analisis",-1),ee={class:"block col-span-2 mb-2"},se=s("span",{class:"text-gray-700"},"Instrumento",-1),te={class:"grid grid-cols-3 gap-x-4 mb-4"},oe={class:"block col-span-1 mb-2"},ae=s("span",{class:"text-gray-700"},"Rango min",-1),le={class:"block col-span-1 mb-2"},ne=s("span",{class:"text-gray-700"},"Rango max",-1),ie={class:"block col-span-2 mb-2"},de=s("span",{class:"text-gray-700"},"Descripcion",-1),ue=s("hr",null,null,-1),pe=S({__name:"MethodForm",props:{method:Object,methodUid:Number,analysis:Object,analysisUid:Number},emits:["close"],setup(g,{emit:w}){const p=F(()=>G(()=>import("./vue-multiselect.esm-16295834.js"),["assets/vue-multiselect.esm-16295834.js","assets/index-7e8465c2.js","assets/index-fff21e38.css"])),M=C(),c=N(),{withClientMutation:b}=P(),f=g,{method:i,analysis:m}=O(f),t=R({...i?.value});T(()=>f.analysisUid,(a,e)=>{});const h=w,v=_(()=>M.getAnalysesServicesSimple);let l=y([]);m?.value?.uid!==void 0?l.value.push(m.value):v.value?.forEach(a=>{a?.methods?.some(e=>e.uid==i?.value?.uid)&&l.value.push(a)}),c.fetchInstruments();const V=_(()=>c.getInstruments);let n=y([]);const U=()=>{const a=[];return i?.value?.instruments?.forEach(e=>{m?.value?.instruments?.some(I=>I?.uid===e?.uid)&&a.push(e)}),a};n.value=U(),i?.value?.uid!==void 0&&i?.value?.instruments?.forEach(a=>n.value.push(a));function A(){const a={name:t?.name,keyword:t?.keyword,min:t?.min,max:t?.max,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};b(z,{payload:a},"createMethod").then(e=>{h("close"),c.addMethod(e)})}function D(){const a={name:t?.name,keyword:t?.keyword,min:t?.min,max:t?.max,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};b(L,{uid:t?.uid,payload:a},"updateMethod").then(e=>{h("close"),c.updateMethod(e)})}function E(){i?.value?.uid||A(),i?.value?.uid&&D()}return(a,e)=>(B(),j("form",Q,[s("div",q,[s("label",J,[K,d(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"Nombre ..."},null,512),[[u,t.name]])]),s("label",W,[X,d(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=o=>t.keyword=o),placeholder:"Codigo ..."},null,512),[[u,t.keyword]])])]),s("div",Y,[s("label",Z,[$,k(r(p),{modelValue:r(l),"onUpdate:modelValue":e[2]||(e[2]=o=>x(l)?l.value=o:l=o),options:v.value,multiple:!0,searchable:!0,label:"name","track-by":"uid",disabled:r(m)?.uid!=null},null,8,["modelValue","options","disabled"])]),s("label",ee,[se,k(r(p),{modelValue:r(n),"onUpdate:modelValue":e[3]||(e[3]=o=>x(n)?n.value=o:n=o),options:V.value,multiple:!0,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])]),s("div",te,[s("label",oe,[ae,d(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=o=>t.min=o),placeholder:"min ..."},null,512),[[u,t.min]])]),s("label",le,[ne,d(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[5]||(e[5]=o=>t.max=o),placeholder:"max ..."},null,512),[[u,t.max]])])]),s("label",ie,[de,d(s("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[6]||(e[6]=o=>t.description=o),placeholder:"Descripcion ..."},null,512),[[u,t.description]])])]),ue,s("button",{type:"button",onClick:e[7]||(e[7]=H(o=>E(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Guardar forma ")]))}});export{pe as default};
