import{d as A,P as R,af as $,ak as q,L as G,r as p,a as U,o as a,c as d,b as t,u as o,e as g,x as i,f as v,v as H,N as j,w as E,H as T,I as y,F as h,y as b,aa as C,G as z,i as J,B as K}from"./index-b75e268d.js";import{_ as O}from"./LoadingMessage.vue_vue_type_script_setup_true_lang-0b4f9f7f.js";import Q from"./SimpleModal-95440dc3.js";import{A as W,E as X}from"./clients.mutations-5b58380b.js";import{h as Y,o as Z,a as tt}from"./constants-9fdeb32f.js";const et={class:""},st={class:"grid grid-cols-12 gap-4 mt-2"},ot={class:"col-span-12"},lt={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},nt={key:0,class:"py-4 text-center"},at={key:1,class:"grid grid-cols-12 gap-3"},it={class:"col-span-12 px-3 sm:px-0"},dt={class:"flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},ct=t("hr",null,null,-1),rt={class:"grid grid-cols-2 mt-2"},ut={class:"col-span-1"},mt={class:"flex"},_t=t("span",{class:"text-gray-800 text-sm font-medium w-16"},"Provincia:",-1),pt={class:"text-gray-600 text-sm md:text-md"},vt={class:"flex"},ft=t("span",{class:"text-gray-800 text-sm font-medium w-16"},"Distrito:",-1),ht={class:"text-gray-600 text-sm md:text-md"},xt={class:"flex"},gt=t("span",{class:"text-gray-800 text-sm font-medium w-16"},"Codigo:",-1),yt={class:"text-gray-600 text-sm md:text-md"},bt={class:"col-span-1"},Ct={class:"flex"},wt=t("span",{class:"text-gray-800 text-sm font-medium w-16"},"Email:",-1),kt={class:"text-gray-600 text-sm md:text-md"},Ut={class:"flex"},Et=t("span",{class:"text-gray-800 text-sm font-medium w-16"},"Telefono:",-1),Tt={class:"text-gray-600 text-sm md:text-md"},Dt={action:"post",class:"p-1"},Nt={class:"grid grid-cols-2 gap-x-4 mb-4"},Pt={class:"block col-span-1 mb-2"},Bt=t("span",{class:"text-gray-700"},"Name",-1),It={class:"block col-span-1 mb-2"},St=t("span",{class:"text-gray-700"},"Code",-1),Vt={class:"grid grid-cols-3 gap-x-4 mb-4"},Lt={class:"block col-span-1 mb-2"},Ft=t("span",{class:"text-gray-700"},"Pais",-1),Mt=t("option",null,null,-1),At=["value"],Rt={class:"block col-span-1 mb-2"},$t=t("span",{class:"text-gray-700"},"Provincia",-1),qt=t("option",null,null,-1),Gt=["value"],Ht={class:"block col-span-1 mb-2"},jt=t("span",{class:"text-gray-700"},"Distrito",-1),zt=t("option",null,null,-1),Jt=["value"],Kt=t("hr",null,null,-1),te=A({__name:"index",setup(Ot){const r=R(),{withClientMutation:w}=K(),D=$(),f=q(),{client:c,fetchingClient:N}=G(f);let u=p(!1),x=p(!1),k=p(""),l=p({}),m=p(),_=p();f.fetchClientByUid(D.query.clientUid),r.fetchCountries();function P(n){r.filterProvincesByCountry(m.value)}function B(n){r.filterDistrictsByProvince(_.value)}function I(n,s={}){x.value=n,k.value=`${n?"CREATE":"EDIT"} CLIENT`,u.value=!0,n?l.value={}:(m.value=s?.district?.province?.countryUid,_.value=s?.district?.provinceUid,l.value=s)}function S(){w(W,{payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"createClient").then(n=>f.addClient(n))}function V(){w(X,{uid:l?.value?.uid,payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"updateClient").then(n=>f.updateClient(n))}function L(){x.value&&S(),x.value||V(),u.value=!1,l.value={}}return(n,s)=>{const F=U("font-awesome-icon"),M=U("router-view");return a(),d(h,null,[t("div",et,[t("div",st,[t("section",ot,[t("div",lt,[o(N)?(a(),d("div",nt,[g(O,{message:"Fetching client metadata ..."})])):(a(),d("div",at,[t("div",it,[t("div",dt,[t("span",null,i(o(c)?.name),1),t("div",null,[v(t("button",{onClick:s[0]||(s[0]=e=>I(!1,o(c))),class:"p-1 ml-2 border-white border text-gray-500 text-md rounded-sm transition duration-300 hover:text-sky-800 focus:outline-none"},[g(F,{icon:"fa-edit"})],512),[[H,Y(tt.UPDATE,Z.CLIENT)]])])]),ct,t("div",rt,[t("div",ut,[t("div",mt,[_t,t("span",pt,i(o(c)?.name),1)]),t("div",vt,[ft,t("span",ht,i(o(c)?.district?.name),1)]),t("div",xt,[gt,t("span",yt,i(o(c)?.code),1)])]),t("div",bt,[t("div",Ct,[wt,t("span",kt,i(o(c)?.email),1)]),t("div",Ut,[Et,t("span",Tt,i(o(c)?.mobilePhone),1)])])])])]))])])]),g(M)]),o(u)?(a(),j(Q,{key:0,onClose:s[9]||(s[9]=e=>y(u)?u.value=!1:u=!1)},{header:E(()=>[t("h3",null,i(o(k)),1)]),body:E(()=>[t("form",Dt,[t("div",Nt,[t("label",Pt,[Bt,v(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[1]||(s[1]=e=>o(l).name=e),placeholder:"Name ..."},null,512),[[T,o(l).name]])]),t("label",It,[St,v(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[2]||(s[2]=e=>o(l).code=e),placeholder:"Code ..."},null,512),[[T,o(l).code]])])]),t("div",Vt,[t("label",Lt,[Ft,v(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":s[3]||(s[3]=e=>y(m)?m.value=e:m=e),onChange:s[4]||(s[4]=e=>P(e))},[Mt,(a(!0),d(h,null,b(o(r).countries,e=>(a(),d("option",{key:e.uid,value:e.uid},i(e.name),9,At))),128))],544),[[C,o(m)]])]),t("label",Rt,[$t,v(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":s[5]||(s[5]=e=>y(_)?_.value=e:_=e),onChange:s[6]||(s[6]=e=>B(e))},[qt,(a(!0),d(h,null,b(o(r).provinces,e=>(a(),d("option",{key:e.uid,value:e.uid},i(e.name),9,Gt))),128))],544),[[C,o(_)]])]),t("label",Ht,[jt,v(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":s[7]||(s[7]=e=>o(l).districtUid=e)},[zt,(a(!0),d(h,null,b(o(r).districts,e=>(a(),d("option",{key:e.uid,value:e.uid},i(e.name),9,Jt))),128))],512),[[C,o(l).districtUid]])])]),Kt,t("button",{type:"button",onClick:s[8]||(s[8]=z(e=>L(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):J("",!0)],64)}}});export{te as default};
