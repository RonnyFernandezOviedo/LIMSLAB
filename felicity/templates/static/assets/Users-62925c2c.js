import{d as L,S as H,aI as j,r as f,Q as q,t as A,o as n,c,b as e,F as y,y as C,x as i,n as N,i as g,u as l,L as E,w as x,f as d,H as b,aa as z,h as R,ab as S,G as B,I as V,z as Q,A as J,bj as K,bk as W,bl as X,bm as Y,B as Z}from"./index-22e9c43e.js";const ee={class:"w-full my-4"},te=e("hr",null,null,-1),se={class:"flex justify-between items-center"},oe=e("h3",null,"Usuarios",-1),le=e("hr",null,null,-1),re={class:"overflow-x-auto mt-4"},ae={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},ne={class:"min-w-full"},ie=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Nombre "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Apellido "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Email "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Activo "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Grupo "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Usuario "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Tipo usuario "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Bloqueado "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),de={class:"bg-white"},ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ue={class:"flex items-center"},pe={class:"text-sm leading-5 text-gray-800"},be={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ge={class:"text-sm leading-5 text-sky-800"},he={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},me={class:"text-sm leading-5 text-sky-800"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},fe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},xe={class:"text-sm leading-5 text-sky-800"},ye={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ke={class:"text-sm leading-5 text-sky-800"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ve={class:"text-sm leading-5 text-sky-800"},Ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ae={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},Ce=["onClick"],Ne=["onClick"],Ee=["onClick"],Re={action:"post",class:"p-1"},Se={class:"grid grid-cols-2 gap-x-4 mb-4"},Be={class:"block col-span-1 mb-2"},Ve=e("span",{class:"text-gray-700"},"Nombre",-1),De={class:"block col-span-1 mb-2"},Te=e("span",{class:"text-gray-700"},"Apellidos",-1),Ge={class:"block col-span-1 mb-2"},Ie=e("span",{class:"text-gray-700"},"Email",-1),Me={class:"block col-span-1 mb-2"},Oe=e("span",{class:"text-gray-700"},"Grupo",-1),$e=e("option",null,null,-1),Fe=["value"],Pe={for:"toggle",class:"block col-span-2 text-xs text-gray-700 mt-4"},Le={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},He=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),je=e("hr",null,null,-1),qe={action:"post",class:"p-1"},ze={class:"grid grid-cols-2 gap-x-4 mb-4"},Qe={class:"block col-span-1 mb-2"},Je=e("span",{class:"text-gray-700"},"Nombre",-1),Ke={class:"block col-span-1 mb-2"},We=e("span",{class:"text-gray-700"},"Contrase単a",-1),Xe={class:"block col-span-1 mb-2"},Ye=e("span",{class:"text-gray-700"},"Confirmar contrase単a",-1),Ze={for:"toggle",class:"block col-span-2 text-xs text-gray-700 mt-4"},et={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},tt=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),st=e("hr",null,null,-1),rt=L({__name:"Users",setup(ot){const k=Q(()=>J(()=>import("./SimpleModal-270d5930.js"),["assets/SimpleModal-270d5930.js","assets/index-22e9c43e.js","assets/index-5bc4f6f2.css","assets/SimpleModal-98e7299b.css"]));H();const a=j(),{withClientMutation:h}=Z();let u=f(!1),p=f(!1),m=f(""),o=q({});const _=f(!0);a.fetchUsers({}),a.fetchGroupsAndPermissions(),a.fetchGroupsAndPermissions(),a.fetchUsers({});let D=A(()=>a.getUsers);const T=A(()=>a.getGroups);function G(){h(K,o,"createUser").then(r=>a.addUser(r))}function I(){h(W,o,"updateUser").then(r=>a.updateUser(r))}function M(){h(X,o,"createUserAuth").then(r=>a.addUserAuth(r))}function O(){h(Y,o,"updateUserAuth").then(r=>a.updateUserAuth(r))}function $(r){let s=[];return r?.groups?.forEach(t=>s.push(t?.name)),s.join(", ")}function w(r,s={}){if(_.value=r,u.value=!0,m.value=(r?"CREAR":"EDITAR")+" USUARIO",r){let t=new Object;t.firstName="",t.lastName="",t.email="",t.isActive=!0,t.groupUid=void 0,Object.assign(o,{...t})}else s.userUid=s?.uid,s.groupUid=s?.groups[0]?.uid,Object.assign(o,{...s})}function F(){_.value?G():I(),u.value=!1}function v(r,s){_.value=r,p.value=!0,m.value=(r?"AGREGAR":"EDITAR")+" CREDENCIALES PARA USUARIO "+s?.firstName;let t=new Object;t.userUid=s?.uid,t.password="",t.passwordc="",r?(t.userName="",t.isBlocked=!1,Object.assign(o,{...t})):(t.userName=s?.auth?.userName,t.isBlocked=s?.auth?.isBlocked,Object.assign(o,{...t}))}function P(){_.value?M():O(),p.value=!1}return(r,s)=>(n(),c(y,null,[e("div",ee,[te,e("div",se,[oe,e("button",{onClick:s[0]||(s[0]=t=>w(!0)),class:"px-2 py-1 ml-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Agregar usuario ")]),le,e("div",re,[e("div",ae,[e("table",ne,[ie,e("tbody",de,[(n(!0),c(y,null,C(l(D),t=>(n(),c("tr",{key:t.uid},[e("td",ce,[e("div",ue,[e("div",pe,i(t.firstName),1)])]),e("td",be,[e("div",ge,i(t.lastName),1)]),e("td",he,[e("div",me,i(t.email),1)]),e("td",_e,[e("span",{class:N(["",["block h-4 w-4 rounded-full bottom-0 right-0",t?.isActive?"bg-emerald-600":"bg-orange-600"]])},null,2)]),e("td",fe,[e("div",xe,i($(t)),1)]),e("td",ye,[e("div",ke,i(t?.auth?.userName),1)]),e("td",we,[e("div",ve,i(t?.auth?.userType),1)]),e("td",Ue,[t?.auth?(n(),c("span",{key:0,class:N(["block h-4 w-4 rounded-full bottom-0 right-0",t?.auth?.isBlocked?"bg-orange-600":"bg-emerald-600"])},null,2)):g("",!0)]),e("td",Ae,[e("button",{onClick:U=>w(!1,t),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit ususario ",8,Ce),t?.auth?g("",!0):(n(),c("button",{key:0,onClick:U=>v(!0,t),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit Auth ",8,Ne)),t?.auth?(n(),c("button",{key:1,onClick:U=>v(!1,t),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit Auth ",8,Ee)):g("",!0)])]))),128))])])])])]),l(u)?(n(),E(l(k),{key:0,onClose:s[7]||(s[7]=t=>V(u)?u.value=!1:u=!1)},{header:x(()=>[e("h3",null,i(l(m)),1)]),body:x(()=>[e("form",Re,[e("div",Se,[e("label",Be,[Ve,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[1]||(s[1]=t=>l(o).firstName=t),placeholder:"Nombre ..."},null,512),[[b,l(o).firstName]])]),e("label",De,[Te,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[2]||(s[2]=t=>l(o).lastName=t),placeholder:"Apellidos ..."},null,512),[[b,l(o).lastName]])]),e("label",Ge,[Ie,d(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":s[3]||(s[3]=t=>l(o).email=t),placeholder:"Email ..."},null,512),[[b,l(o).email]])]),e("label",Me,[Oe,d(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":s[4]||(s[4]=t=>l(o).groupUid=t)},[$e,(n(!0),c(y,null,C(T.value,t=>(n(),c("option",{key:t.uid,value:t.uid},i(t?.name),9,Fe))),128))],512),[[z,l(o).groupUid]])]),e("label",Pe,[R("Active "),e("div",Le,[d(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":s[5]||(s[5]=t=>l(o).isActive=t),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[S,l(o).isActive]]),He])])]),je,e("button",{type:"button",onClick:s[6]||(s[6]=B(t=>F(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Guardar forma ")])]),_:1})):g("",!0),l(p)?(n(),E(l(k),{key:1,onClose:s[13]||(s[13]=t=>V(p)?p.value=!1:p=!1)},{header:x(()=>[e("h3",null,i(l(m)),1)]),body:x(()=>[e("form",qe,[e("div",ze,[e("label",Qe,[Je,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[8]||(s[8]=t=>l(o).userName=t),placeholder:"Nombre ..."},null,512),[[b,l(o).userName]])]),e("label",Ke,[We,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[9]||(s[9]=t=>l(o).password=t),placeholder:"Contrase単a ..."},null,512),[[b,l(o).password]])]),e("label",Xe,[Ye,d(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":s[10]||(s[10]=t=>l(o).passwordc=t),placeholder:"Contrase単a ..."},null,512),[[b,l(o).passwordc]])]),e("label",Ze,[R("Bloqueado "),e("div",et,[d(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":s[11]||(s[11]=t=>l(o).isBlocked=t),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[S,l(o).isBlocked]]),tt])])]),st,e("button",{type:"button",onClick:s[12]||(s[12]=B(t=>P(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Guardar forma ")])]),_:1})):g("",!0)],64))}});export{rt as default};
