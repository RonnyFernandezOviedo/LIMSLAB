import{d as se,V as oe,a9 as ne,S as le,K as ae,r as C,Q as A,t as m,a as ie,o as n,c as l,b as e,f as p,v as L,G as x,I as V,u as i,F as h,y as v,x as _,e as q,w as U,h as re,i as w,aa as g,L as de,z as T,J as ce,A as D,aN as ue,B as pe}from"./index-08b76645.js";import{h as he,o as _e,a as fe}from"./constants-514fb6d1.js";const me={class:"flex items-center justify-between"},ve=e("h1",{class:"h1 font-bold text-dark-700"},"QC Analyses Requests",-1),be=e("hr",null,null,-1),ye={class:"overflow-x-auto mt-4"},ge={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},xe={class:"min-w-full"},we=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Date Created"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"QCSet (samples)"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Test(s)"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),ke={class:"bg-white"},Ce=e("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1),Se={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Qe={class:"flex items-center"},Ae={class:"text-sm leading-5 text-gray-800"},Ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ue={class:"text-sm leading-5 text-sky-800"},Pe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ee={class:"text-sm leading-5 text-sky-800"},Le={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},qe={key:0,class:"py-4 text-center"},Te={class:"flex justify-between"},De=e("div",null,null,-1),Re={class:"my-4 flex sm:flex-row flex-col"},Be={class:"flex flex-row mb-1 sm:mb-0"},Ie={class:"relative"},Me=["disabled"],Ne=ce('<option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="250">250</option><option value="500">500</option><option value="1000">1000</option><option value="5000">5000</option><option value="10000">10000</option>',8),je=[Ne],$e=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),Fe={class:"block relative"},ze=["placeholder"],Oe=e("h3",null,"Create QC Analyses Requests",-1),Ge={action:"post",class:"mb-8 bg-white"},Je={class:"grid grid-cols-3 gap-x-4 mb-4"},Ke={class:"block col-span-1"},Ze=e("span",{class:"text-gray-700"},"Department",-1),He=e("option",{value:""},null,-1),We=["value"],Xe={id:"samples"},Ye=e("hr",null,null,-1),et={class:"flex justify-between items-center py-2"},tt=e("h5",null,"Process Control Samples",-1),st=e("i",{class:"fa fa-ellipsis-h","aria-hidden":"true"},null,-1),ot=[st],nt=e("hr",{class:"mb-4"},null,-1),lt={class:"flex items-center justify-between"},at={class:""},it={class:"grid grid-cols-4 gap-x-4"},rt={class:"block col-span-1 mb-2"},dt=e("span",{class:"text-gray-700"},"QC Template",-1),ct=["onUpdate:modelValue"],ut=e("option",{value:""},null,-1),pt=["value"],ht={key:0,class:"block col-span-1 mb-2"},_t=e("span",{class:"text-gray-700"},"QC Levels",-1),ft=["onUpdate:modelValue"],mt=e("option",{value:""},null,-1),vt=["value"],bt={class:"block col-span-1 mb-2"},yt=e("span",{class:"text-gray-700"},"Analysis Profiles",-1),gt=["onUpdate:modelValue"],xt=e("option",{value:""},null,-1),wt=["value"],kt={key:1,class:"block col-span-1 mb-2"},Ct=e("span",{class:"text-gray-700"},"Analysis Services",-1),St=["onUpdate:modelValue"],Qt=e("option",{value:""},null,-1),At=["value"],Vt={class:""},Ut=["onClick"],Pt=e("hr",null,null,-1),Et=e("hr",null,null,-1),Dt=se({__name:"Listing",setup(Lt){const R=T(()=>D(()=>import("./LoadingMessage-941cfe8b.js"),["assets/LoadingMessage-941cfe8b.js","assets/LoadingMessage.vue_vue_type_script_setup_true_lang-fe50ad34.js","assets/index-08b76645.js","assets/index-5bc4f6f2.css"])),B=T(()=>D(()=>import("./SimpleModal-726a79fc.js"),["assets/SimpleModal-726a79fc.js","assets/index-08b76645.js","assets/index-5bc4f6f2.css","assets/SimpleModal-98e7299b.css"])),c=oe(),u=ne(),P=le(),{withClientMutation:I}=pe(),{qcSets:M,fetchingQCSets:N}=ae(c);let d=C(!1),j=C(!0),f=A({departmentUid:void 0,samples:[{}]}),$=A({first:void 0,after:"",text:"",sortBy:["name"]});u.fetchAnalysesServices($),u.fetchQCLevels(),u.fetchQCTemplates(),u.fetchAnalysesProfiles(),P.fetchDepartments({}),c.resetQCSets();let b=C(25),y=A({first:b.value,after:"",text:"",sortBy:["uid"],filterAction:!1});c.fetchQCSets(y);const F=m(()=>u.getAnalysesProfiles),z=m(()=>{const r=u.getAnalysesServicesSimple;let s=new Set;return r.forEach(a=>{a.profiles?.length===0&&s.add(a)}),[...s]});function O(){I(ue,{samples:f.samples},"createQcSet").then(r=>c.addQCSet(r))}function G(){f.samples?.push({})}function J(r){f.samples?.splice(r,1)}function K(){j.value===!0&&O(),d.value=!1}const S=m(()=>c.getQCSetPageInfo);function Z(){y.first=+b.value,y.after=S?.value?.pageInfo?.endCursor??"",y.text="",y.filterAction=!1,c.fetchQCSets(y)}function H(r){let s=[];return r?.forEach(a=>{a?.sampleId+""+a.status;let t=a?.qcLevel?.level?.match(/\b([A-Z])/g).join("")+" ("+a.status+")";s.includes(t)||s.push(t)}),s.join(", ")}function W(r){let s=[];return r?.forEach(a=>{a.profiles.forEach(t=>{s.includes(t.name)||s.push(t.name)})}),r?.forEach(a=>{a.analyses.forEach(t=>{s.includes(t.name)||s.push(t.name)})}),s.join(", ")}const k=C(!1),X=m(()=>P.getDepartments),Y=m(()=>u.getQCTemplates),ee=m(()=>u.getQCLevels),te=m(()=>c.getQCSets?.length+" of "+c.getQCSetCount+" QC Sets");return(r,s)=>{const a=ie("router-link");return n(),l(h,null,[e("div",me,[ve,p(e("button",{type:"button",class:"border border-sky-800 text-sky-800 rounded-sm px-2 py-1 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 hover:text-white focus:outline-none focus:shadow-outline",onClick:s[0]||(s[0]=x(t=>V(d)?d.value=!i(d):d=!i(d),["prevent"]))}," Add New QC Request ",512),[[L,he(fe.CREATE,_e.SAMPLE)]])]),be,e("section",ye,[e("div",ge,[e("table",xe,[we,e("tbody",ke,[(n(!0),l(h,null,v(i(M),t=>(n(),l("tr",{key:t.uid},[Ce,e("td",Se,[e("div",Qe,[e("div",Ae,_(t.createdAt),1)])]),e("td",Ve,[e("div",Ue,_(H(t.samples??[])),1)]),e("td",Pe,[e("div",Ee,_(W(t.samples??[])),1)]),e("td",Le,[q(a,{to:{name:"qc-set-detail",params:{qcSetUid:t.uid}},class:"px-2 py-1 mr-2 border-sky-800 border text-gray-500rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},{default:U(()=>[re("View Detail")]),_:2},1032,["to"])])]))),128))])]),i(N)?(n(),l("div",qe,[q(i(R),{message:"Fetching QCSets ..."})])):w("",!0)])]),e("section",Te,[De,e("div",Re,[p(e("button",{onClick:s[1]||(s[1]=x(t=>Z(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Show More",512),[[L,S.value?.pageInfo?.hasNextPage]]),e("div",Be,[e("div",Ie,[p(e("select",{class:"appearance-none h-full rounded-l-sm border block w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none focus:bg-white focus:border-gray-500","onUpdate:modelValue":s[2]||(s[2]=t=>V(b)?b.value=t:b=t),disabled:!S.value?.pageInfo?.hasNextPage},je,8,Me),[[g,i(b)]]),$e])]),e("div",Fe,[e("input",{placeholder:te.value,class:"appearance-none rounded-r-sm rounded-l-sm sm:rounded-l-none border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none",disabled:""},null,8,ze)])])]),i(d)?(n(),de(i(B),{key:0,onClose:s[7]||(s[7]=t=>V(d)?d.value=!1:d=!1)},{header:U(()=>[Oe]),body:U(()=>[e("form",Ge,[e("div",Je,[e("label",Ke,[Ze,p(e("select",{name:"clientContacts",id:"clientContacts","onUpdate:modelValue":s[3]||(s[3]=t=>i(f).departmentUid=t),class:"form-input mt-1 block w-full"},[He,(n(!0),l(h,null,v(X.value,t=>(n(),l("option",{key:t.uid,value:t.uid},_(t.name),9,We))),128))],512),[[g,i(f).departmentUid]])])]),e("section",Xe,[Ye,e("div",et,[tt,e("span",{class:"cursor-pointer text-xl text-sky-800",onClick:s[4]||(s[4]=t=>k.value=!k.value)},ot),i(f).samples?.length<20?(n(),l("button",{key:0,onClick:s[5]||(s[5]=x(t=>G(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Add QCSet")):w("",!0)]),nt,(n(!0),l(h,null,v(i(f).samples,(t,E)=>(n(),l("div",{key:E},[e("div",lt,[e("div",at,[e("div",it,[e("label",rt,[dt,p(e("select",{"onUpdate:modelValue":o=>t.qcTemplateUid=o,class:"form-input mt-1 block w-full"},[ut,(n(!0),l(h,null,v(Y.value,(o,Q)=>(n(),l("option",{key:o.uid,value:o.uid},_(o.name),9,pt))),128))],8,ct),[[g,t.qcTemplateUid]])]),k.value?(n(),l("label",ht,[_t,p(e("select",{"onUpdate:modelValue":o=>t.qcLevels=o,class:"form-input mt-1 block w-full",multiple:""},[mt,(n(!0),l(h,null,v(ee.value,(o,Q)=>(n(),l("option",{key:o.uid,value:o.uid},_(o.level),9,vt))),128))],8,ft),[[g,t.qcLevels]])])):w("",!0),e("label",bt,[yt,p(e("select",{"onUpdate:modelValue":o=>t.analysisProfiles=o,class:"form-input mt-1 block w-full",multiple:""},[xt,(n(!0),l(h,null,v(F.value,(o,Q)=>(n(),l("option",{key:o.uid,value:o.uid},_(o.name),9,wt))),128))],8,gt),[[g,t.analysisProfiles]])]),k.value?(n(),l("label",kt,[Ct,p(e("select",{"onUpdate:modelValue":o=>t.analysisServices=o,class:"form-input mt-1 block w-full",multiple:""},[Qt,(n(!0),l(h,null,v(z.value,(o,Q)=>(n(),l("option",{key:o.uid,value:o.uid},_(o.name),9,At))),128))],8,St),[[g,t.analysisServices]])])):w("",!0)])]),e("div",Vt,[e("button",{onClick:x(o=>J(E),["prevent"]),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"},"Remove",8,Ut)])]),Pt]))),128))]),Et,e("button",{type:"button",onClick:s[6]||(s[6]=x(t=>K(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):w("",!0)],64)}}});export{Dt as default};
