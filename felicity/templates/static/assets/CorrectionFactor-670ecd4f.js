import{d as M,a9 as N,S as D,ar as L,r as h,Q as V,D as B,t as C,o as l,c as r,b as t,F as c,y as b,x as d,u as a,L as $,w as A,f as y,aa as F,H as j,G as Y,I as q,i as P,z,A as G,b_ as H,b$ as Q,B as W}from"./index-e479c930.js";const J=t("hr",null,null,-1),K={class:"overflow-x-auto mt-4"},X={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},Z={class:"min-w-full"},tt=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Intrument"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Method"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Factor"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),et={class:"bg-white"},st={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ot={class:"flex items-center"},nt={class:"text-sm leading-5 text-gray-800"},at={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},lt={class:"text-sm leading-5 text-sky-800"},rt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},it={class:"text-sm leading-5 text-sky-800"},dt={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},ut=["onClick"],ct={action:"post",class:"p-1"},pt={class:"grid grid-cols-3 gap-x-4 mb-4"},mt={class:"block col-span-1 mb-2"},_t=t("span",{class:"text-gray-700 w-4/12"},"Instrument",-1),ht={class:"w-full"},bt=t("option",null,null,-1),yt=["value"],ft={class:"block col-span-1 mb-2"},vt=t("span",{class:"text-gray-700 w-4/12"},"Method",-1),xt={class:"w-full"},gt=t("option",null,null,-1),wt=["value"],kt={class:"block col-span-1 mb-2"},Ct=t("span",{class:"text-gray-700"},"Factor",-1),At=t("hr",null,null,-1),St=M({__name:"CorrectionFactor",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(I){const S=z(()=>G(()=>import("./SimpleModal-9cb01b9f.js"),["assets/SimpleModal-9cb01b9f.js","assets/index-e479c930.js","assets/index-5bc4f6f2.css","assets/SimpleModal-98e7299b.css"])),f=N(),u=D(),{withClientMutation:v}=W(),x=I,{analysis:g}=L(x);let i=h(!1),w=h(""),n=V({});const p=h(!0);B(()=>x.analysisUid,(o,s)=>{}),u.fetchInstruments();const m=C(()=>u.getInstruments);u.fetchMethods();const _=C(()=>u.getMethods);function U(){const o={...n,analysisUid:g?.value?.uid};v(H,{payload:o},"createAnalysisCorrectionFactor").then(s=>f.AddAnalysisCorrectionFactor(s))}function O(){const o={...n};delete o.uid,delete o.__typename,v(Q,{uid:n.uid,payload:o},"updateAnalysisCorrectionFactor").then(s=>f.updateAnalysisCorrectionFactor(s))}function k(o,s={}){p.value=o,i.value=!0,w.value=(o?"CREATE":"EDIT")+" ANALYSIS CORRECTION FACTOR",o?Object.assign(n,{factor:null,instrumentUid:null,methodUid:null}):Object.assign(n,{...s})}function R(){p.value===!0&&U(),p.value===!1&&O(),i.value=!1}const T=o=>{const s=m?.value?.findIndex(e=>e.uid===o);return m?.value[s]?.name||"unknown"},E=o=>{const s=_?.value?.findIndex(e=>e.uid===o);return _?.value[s]?.name||"unknown"};return(o,s)=>(l(),r(c,null,[t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:s[0]||(s[0]=e=>k(!0))},"Add Correction Factor"),J,t("div",K,[t("div",X,[t("table",Z,[tt,t("tbody",et,[(l(!0),r(c,null,b(a(g)?.correctionFactors,e=>(l(),r("tr",{key:e?.uid},[t("td",st,[t("div",ot,[t("div",null,[t("div",nt,d(T(e?.instrumentUid)),1)])])]),t("td",at,[t("div",lt,d(E(e?.instrumentUid)),1)]),t("td",rt,[t("div",it,d(e.factor),1)]),t("td",dt,[t("button",{onClick:Ft=>k(!1,e),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Edit",8,ut)])]))),128))])])])]),a(i)?(l(),$(a(S),{key:0,onClose:s[5]||(s[5]=e=>q(i)?i.value=!1:i=!1),contentWidth:"w-2/4"},{header:A(()=>[t("h3",null,d(a(w)),1)]),body:A(()=>[t("form",ct,[t("div",pt,[t("label",mt,[_t,t("div",ht,[y(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":s[1]||(s[1]=e=>a(n).instrumentUid=e)},[bt,(l(!0),r(c,null,b(m.value,e=>(l(),r("option",{key:e?.uid,value:e.uid},d(e?.name),9,yt))),128))],512),[[F,a(n).instrumentUid]])])]),t("label",ft,[vt,t("div",xt,[y(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":s[2]||(s[2]=e=>a(n).methodUid=e)},[gt,(l(!0),r(c,null,b(_.value,e=>(l(),r("option",{key:e?.uid,value:e.uid},d(e?.name),9,wt))),128))],512),[[F,a(n).methodUid]])])]),t("label",kt,[Ct,y(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[3]||(s[3]=e=>a(n).factor=e),placeholder:"Factor ..."},null,512),[[j,a(n).factor]])])]),At,t("button",{type:"button",onClick:s[4]||(s[4]=Y(e=>R(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):P("",!0)],64))}});export{St as default};
