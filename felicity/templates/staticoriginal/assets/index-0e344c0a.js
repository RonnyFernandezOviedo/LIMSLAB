import{d as re,ae as de,a9 as ue,af as ce,r as x,Q as $,s as _e,a as pe,o as n,c as l,b as e,x as d,u as i,F as c,y as p,e as F,w as A,h as j,N as I,f as h,H as C,aa as b,G as v,I as L,i as M,z as X,A as q,ag as he,B as me}from"./index-60c5f486.js";import{a as fe,b as ye,c as ve,d as xe}from"./reflex.mutations-36bbf485.js";const be={class:"mt-4 mb-2 text-xl text-gray-600 font-semibold tracking-wide"},ge={class:"leading-2 text-md italic tracking-wide"},ke=e("hr",null,null,-1),we=e("hr",null,null,-1),Re=["onClick"],Ae={class:"flex justify-start items-center mb-2"},Ce=e("h4",{class:"text-l leading-4 italic"},"Reflex Action Brains",-1),Ue=["onClick"],Ve={class:"grid grid-cols-3 gap-4"},Ee={class:"flex justify-between items-center"},Fe={class:"my-2 text-l text-gray-600 font-bold"},Be=["onClick"],Ne=e("hr",{class:"my-2"},null,-1),Se=e("h4",{class:"my-2 text-md text-gray-500 font-semibold"},"Analyses Criteria",-1),De={class:"flex justify-start items-baseline flex-wrap"},Te={class:"flex"},Oe={class:"px-2 py-1 border border-gray-500 bg-gray-500 text-white transition duration-300 focus:outline-none"},$e={class:"px-2 py-1 border-gray-500 border text-gray-500 transition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"},je=e("h4",{class:"my-2 text-md text-gray-500 font-semibold"},"Add New Analyses",-1),Ie={class:"flex justify-start items-baseline flex-wrap"},Le={class:"flex"},Me={class:"px-2 py-1 border-gray-500 border text-gray-500 transition duration-300 focus:outline-none"},Xe={class:"px-2 py-1 border border-gray-500 bg-gray-500 text-white transition duration-300 focus:outline-none"},qe=e("h4",{class:"my-2 text-md text-gray-500 font-semibold"},"Finalise",-1),Pe={class:"flex justify-start items-baseline flex-wrap"},ze={class:"flex"},He={class:"px-2 py-1 border border-gray-500 bg-gray-500 text-white transition duration-300 focus:outline-none"},Ge={class:"px-2 py-1 border-gray-500 border text-gray-500 transition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"},Qe={action:"post",class:"p-1"},We={class:"grid grid-cols-2 gap-x-4 mb-4"},Je={class:"block col-span-1 mb-2"},Ke=e("span",{class:"text-gray-700"},"Level",-1),Ye={class:"block col-span-2 mb-2"},Ze=e("span",{class:"text-gray-700"},"Target Analyses",-1),et=e("option",{value:""},null,-1),tt=["value"],st={class:"block col-span-2 mb-2"},ot=e("span",{class:"text-gray-700"},"Description",-1),nt=e("hr",null,null,-1),lt={action:"post",class:"p-1"},it={class:"grid grid-cols-3 gap-x-4 mb-4"},at={class:"block col-span-3 mb-2"},rt=e("span",{class:"text-gray-700"},"Description",-1),dt={id:"criteria"},ut=e("hr",null,null,-1),ct={class:"flex justify-between items-center py-2"},_t=e("h5",null,"Criteria",-1),pt=e("span",{class:"text-orange-600"},null,-1),ht=e("hr",{class:"mb-4"},null,-1),mt={class:"flex items-center justify-between"},ft={class:"flex items-bottom gap-x-2"},yt={class:"flex flex-col whitespace-nowrap mb-2"},vt=e("span",{class:"text-gray-700"},"Analysis",-1),xt=["onUpdate:modelValue","onChange"],bt=e("option",{value:""},null,-1),gt=["value"],kt={class:"flex flex-col whitespace-nowrap mb-2"},wt=e("span",{class:"text-white"},".",-1),Rt=["onUpdate:modelValue"],At=e("option",{value:"eq"},"=",-1),Ct=e("option",{value:"gt"},">",-1),Ut=e("option",{value:"lt"},"<",-1),Vt=e("option",{value:"neq"},"â‰ ",-1),Et=[At,Ct,Ut,Vt],Ft={class:"block col-span-1 mt-1"},Bt=e("span",{class:"text-gray-700"},"Result",-1),Nt=["onUpdate:modelValue"],St=["onUpdate:modelValue"],Dt=e("option",{value:""},null,-1),Tt=["value"],Ot={class:""},$t=["onClick"],jt=e("hr",null,null,-1),It={id:"add-new"},Lt=e("hr",null,null,-1),Mt={class:"flex justify-between items-center py-2"},Xt=e("h5",null,"Add New",-1),qt=e("span",{class:"text-orange-600"},null,-1),Pt=e("hr",{class:"mb-4"},null,-1),zt={class:"flex items-center justify-between"},Ht={class:"flex items-top gap-x-4"},Gt={class:"flex flex-col whitespace-nowrap mb-2"},Qt=e("span",{class:"text-gray-700"},"Analysis",-1),Wt=["onUpdate:modelValue"],Jt=e("option",{value:""},null,-1),Kt=["value"],Yt={class:"block col-span-1 mb-2"},Zt=e("span",{class:"text-gray-700"},"Count",-1),es=["onUpdate:modelValue"],ts={class:""},ss=["onClick"],os=e("hr",null,null,-1),ns={id:"criteria"},ls=e("hr",null,null,-1),is={class:"flex justify-between items-center py-2"},as=e("h5",null,"Finalize",-1),rs=e("span",{class:"text-orange-600"},null,-1),ds=e("hr",{class:"mb-4"},null,-1),us={class:"flex items-center justify-between"},cs={class:"flex items-top gap-x-4"},_s={class:"flex flex-col whitespace-nowrap mb-2"},ps=e("span",{class:"text-gray-700"},"Analysis",-1),hs=["onUpdate:modelValue","onChange"],ms=e("option",{value:""},null,-1),fs=["value"],ys={class:"block col-span-1 mb-2"},vs=e("span",{class:"text-gray-700"},"Result",-1),xs=["onUpdate:modelValue"],bs=["onUpdate:modelValue"],gs=e("option",{value:""},null,-1),ks=["value"],ws={class:""},Rs=["onClick"],As=e("hr",null,null,-1),Cs=e("hr",null,null,-1),Fs=re({__name:"index",setup(Us){const D=X(()=>q(()=>import("./SimpleModal-72c52623.js"),["assets/SimpleModal-72c52623.js","assets/index-60c5f486.js","assets/index-a964bbb1.css","assets/SimpleModal-98e7299b.css"])),P=X(()=>q(()=>import("./Accordion-92e5edb9.js"),["assets/Accordion-92e5edb9.js","assets/index-60c5f486.js","assets/index-a964bbb1.css"])),m=de(),z=ue(),{withClientMutation:V}=me(),H=ce();let g=x(!1),E=x(""),_=$({});const k=x(!0);let w=x(!1),u=$({addNew:[],analysesValues:[],finalise:[]});_e(async()=>{m.fetchReflexRuleByUid(H.params?.uid)});const G=a=>{const s=he(a);return s.charAt(0).toUpperCase()+s.slice(1)},R=z.getAnalysesServicesSimple;function Q(){const a={reflexRuleUid:m.reflexRule?.uid,level:_.level,description:_.description,analyses:_.analyses};V(fe,{payload:a},"createReflexAction").then(s=>m.addReflexAction(s))}function W(){const a={reflexRuleUid:m.reflexRule?.uid,level:_.level,description:_.description,analyses:_.analyses};V(ye,{uid:_.uid,payload:a},"updateReflexAction").then(s=>m.updateReflexAction(s))}function T(a,s={}){if(k.value=a,g.value=!0,E.value=(a?"CREATE":"EDIT")+" REFLEX ACTION",a)Object.assign(_,{});else{let f=[];s.analyses?.forEach(t=>f.push(t?.uid)),Object.assign(_,{...s,analyses:f})}}function J(){k.value===!0&&Q(),k.value===!1&&W(),g.value=!1}const B=x();function K(){const a={...u,reflexActionUid:B.value};V(ve,{payload:a},"createReflexBrain").then(s=>m.updateReflexBrain(s))}function Y(){const a={...u,reflexActionUid:B.value};V(xe,{uid:u.uid,payload:a},"updateReflexBrain").then(s=>m.updateReflexBrain(s))}function Z(){u.analysesValues?.push({operator:"eq"})}function ee(a){u.analysesValues?.splice(a,1)}let N=x([]);function te(a,s){const f=R?.find(t=>t.uid===s.analysisUid);s.value=void 0,N.value=f?.resultOptions||[]}function se(){u.addNew?.push({})}function oe(a){u.addNew?.splice(a,1)}function ne(){u.finalise?.push({})}function le(a){u.finalise?.splice(a,1)}let S=x([]);function ie(a,s){const f=R?.find(t=>t.uid===s.analysisUid);s.value=void 0,S.value=f?.resultOptions||[]}function O(a,s={}){k.value=a,w.value=!0,E.value=(a?"CREATE":"EDIT")+" REFLEX BRAIN",B.value=s.uid,a?Object.assign(u,{}):Object.assign(u,{...s})}function ae(){k.value===!0&&K(),k.value===!1&&Y(),w.value=!1}return(a,s)=>{const f=pe("font-awesome-icon");return n(),l(c,null,[e("h3",be,d(i(m).reflexRule?.name),1),e("p",ge,d(i(m).reflexRule?.description),1),ke,e("button",{onClick:s[0]||(s[0]=t=>T(!0)),class:"my-4 px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Reflex Action "),we,(n(!0),l(c,null,p(i(m).reflexRule?.reflexActions,t=>(n(),l("section",{class:"col-span-1",key:t?.uid},[F(i(P),null,{title:A(()=>[e("span",{class:"p-2",onClick:r=>T(!1,t)},[F(f,{icon:"edit",class:"text-md text-gray-400 mr-1"})],8,Re),j(" Reflex Action Level "+d(t?.level)+" targeting ",1),(n(!0),l(c,null,p(t?.analyses,r=>(n(),l("span",{key:r.uid,class:"ml-1"},d(r?.name)+",",1))),128))]),body:A(()=>[e("div",Ae,[Ce,e("button",{onClick:r=>O(!0,t),class:"ml-4 px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Brain ",8,Ue)]),e("div",Ve,[(n(!0),l(c,null,p(t?.brains,(r,o)=>(n(),l("div",{key:r?.uid,class:"block col-span-1 bg-white py-2 px-4 m"},[e("div",Ee,[e("h2",Fe,d(G(o+1))+" Brain ",1),e("span",{class:"p-2",onClick:y=>O(!1,r)},[F(f,{icon:"edit",class:"text-md text-gray-400 mr-1"})],8,Be)]),e("h3",null,d(r?.description),1),Ne,e("div",null,[Se,(n(!0),l(c,null,p(r?.analysesValues,(y,U)=>(n(),l("div",{key:U},[e("div",De,[e("div",Te,[e("button",Oe,d(y?.analysis?.name),1),e("button",$e,d(y?.value),1)])])]))),128)),je,(n(!0),l(c,null,p(r?.addNew,(y,U)=>(n(),l("div",{key:U},[e("div",Ie,[e("div",Le,[e("button",Me,[j(d(y?.count)+" ",1),F(f,{icon:"asterisk",class:"text-l text-gray-600 mx-1"})]),e("button",Xe,d(y?.analysis?.name),1)])])]))),128)),qe,(n(!0),l(c,null,p(r?.finalise,(y,U)=>(n(),l("div",{key:U},[e("div",Pe,[e("div",ze,[e("button",He,d(y?.analysis?.name),1),e("button",Ge,d(y?.value),1)])])]))),128))])]))),128))])]),_:2},1024)]))),128)),i(g)?(n(),I(i(D),{key:0,onClose:s[5]||(s[5]=t=>L(g)?g.value=!1:g=!1)},{header:A(()=>[e("h3",null,d(i(E)),1)]),body:A(()=>[e("form",Qe,[e("div",We,[e("label",Je,[Ke,h(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[1]||(s[1]=t=>i(_).level=t),type:"number",placeholder:"Name ..."},null,512),[[C,i(_).level]])]),e("label",Ye,[Ze,h(e("select",{name:"analyses",id:"analyses","onUpdate:modelValue":s[2]||(s[2]=t=>i(_).analyses=t),class:"form-input mt-1 block w-full",multiple:""},[et,(n(!0),l(c,null,p(i(R),t=>(n(),l("option",{key:t.uid,value:t.uid},d(t.name),9,tt))),128))],512),[[b,i(_).analyses]])]),e("label",st,[ot,h(e("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[3]||(s[3]=t=>i(_).description=t),placeholder:"Description ..."},null,512),[[C,i(_).description]])])]),nt,e("button",{type:"button",onClick:s[4]||(s[4]=v(t=>J(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):M("",!0),i(w)?(n(),I(i(D),{key:1,onClose:s[11]||(s[11]=t=>L(w)?w.value=!1:w=!1),contentWidth:"w-4/5"},{header:A(()=>[e("h3",null,d(i(E)),1)]),body:A(()=>[e("form",lt,[e("div",it,[e("label",at,[rt,h(e("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[6]||(s[6]=t=>i(u).description=t),placeholder:"Description ..."},null,512),[[C,i(u).description]])]),e("section",dt,[ut,e("div",ct,[_t,pt,e("button",{onClick:s[7]||(s[7]=v(t=>Z(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Criteria ")]),ht,(n(!0),l(c,null,p(i(u).analysesValues,(t,r)=>(n(),l("div",{key:r},[e("div",mt,[e("div",ft,[e("label",yt,[vt,h(e("select",{name:"analysisService",id:"analysisService","onUpdate:modelValue":o=>t.analysisUid=o,class:"form-input mt-1",onChange:o=>te(o,t)},[bt,(n(!0),l(c,null,p(i(R),o=>(n(),l("option",{key:o.uid,value:o.uid},d(o.name),9,gt))),128))],40,xt),[[b,t.analysisUid]])]),e("label",kt,[wt,h(e("select",{name:"operator",id:"operator","onUpdate:modelValue":o=>t.operator=o,class:"form-input mt-1"},Et,8,Rt),[[b,t.operator]])]),e("label",Ft,[Bt,i(N).length==0?h((n(),l("input",{key:0,class:"form-input mt-1 block w-full","onUpdate:modelValue":o=>t.value=o,type:"text",placeholder:"Result ..."},null,8,Nt)),[[C,t.value]]):h((n(),l("select",{key:1,name:"criteriaValue",id:"criteriaValue","onUpdate:modelValue":o=>t.value=o,class:"form-input"},[Dt,(n(!0),l(c,null,p(i(N),o=>(n(),l("option",{key:o.uid,value:o.value},d(o.value),9,Tt))),128))],8,St)),[[b,t.value]])])]),e("div",Ot,[e("button",{onClick:v(o=>ee(r),["prevent"]),class:"px-2 py-1 mt-5 ml-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Remove ",8,$t)])]),jt]))),128))]),e("section",It,[Lt,e("div",Mt,[Xt,qt,e("button",{onClick:s[8]||(s[8]=v(t=>se(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add New ")]),Pt,(n(!0),l(c,null,p(i(u).addNew,(t,r)=>(n(),l("div",{key:r},[e("div",zt,[e("div",Ht,[e("label",Gt,[Qt,h(e("select",{name:"analysisService",id:"analysisService","onUpdate:modelValue":o=>t.analysisUid=o,class:"form-input mt-1"},[Jt,(n(!0),l(c,null,p(i(R),o=>(n(),l("option",{key:o.uid,value:o.uid},d(o.name),9,Kt))),128))],8,Wt),[[b,t.analysisUid]])]),e("label",Yt,[Zt,h(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o=>t.count=o,type:"number",placeholder:"How Many ...",default:"1"},null,8,es),[[C,t.count]])])]),e("div",ts,[e("button",{onClick:v(o=>oe(r),["prevent"]),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Remove ",8,ss)])]),os]))),128))]),e("section",ns,[ls,e("div",is,[as,rs,e("button",{onClick:s[9]||(s[9]=v(t=>ne(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Final ")]),ds,(n(!0),l(c,null,p(i(u).finalise,(t,r)=>(n(),l("div",{key:r},[e("div",us,[e("div",cs,[e("label",_s,[ps,h(e("select",{name:"analysisService",id:"analysisService","onUpdate:modelValue":o=>t.analysisUid=o,class:"form-input mt-1",onChange:o=>ie(o,t)},[ms,(n(!0),l(c,null,p(i(R),o=>(n(),l("option",{key:o.uid,value:o.uid},d(o.name),9,fs))),128))],40,hs),[[b,t.analysisUid]])]),e("label",ys,[vs,i(S).length==0?h((n(),l("input",{key:0,class:"form-input mt-1 block w-full","onUpdate:modelValue":o=>t.value=o,type:"text",placeholder:"Result ..."},null,8,xs)),[[C,t.value]]):h((n(),l("select",{key:1,name:"finalValue",id:"finalValue","onUpdate:modelValue":o=>t.value=o,class:"form-input mt-1"},[gs,(n(!0),l(c,null,p(i(S),o=>(n(),l("option",{key:o.uid,value:o.value},d(o.value),9,ks))),128))],8,bs)),[[b,t.value]])])]),e("div",ws,[e("button",{onClick:v(o=>le(r),["prevent"]),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Remove ",8,Rs)])]),As]))),128))])]),Cs,e("button",{type:"button",onClick:s[10]||(s[10]=v(t=>ae(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):M("",!0)],64)}}});export{Fs as default};
