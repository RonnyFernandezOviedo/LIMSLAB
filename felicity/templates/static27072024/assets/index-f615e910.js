import{d as re,V as ne,af as ie,E as de,Q as le,L as ce,D as R,t as l,a as f,M as ue,o as c,c as m,b as e,u as s,N as pe,w as j,h as w,i as C,f as i,e as h,n as me,x as o,v as d,ak as v,F as L,y as ve,z as ye,A as xe}from"./index-7e8465c2.js";import{u as he}from"./samples-4e71fb6f.js";const be={class:"flex justify-between"},_e=e("h3",{class:"my-4 font-bold"},"Detalles de Muestra",-1),ge=e("hr",null,null,-1),fe={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},we={key:0,class:"py-4 text-center"},Ce={key:1,class:"grid grid-cols-12 gap-3"},ke={class:"col-span-12 px-3 sm:px-0"},Se={class:"mb-2 flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},Re=e("i",{class:"fa fa-star"},null,-1),je=[Re],Le={key:1},$e={type:"button",class:"bg-sky-800 text-white px-2 py-1 rounded-sm leading-none"},Ie={class:"ml-2"},Pe={class:"absolute mt-4 py-0 bg-gray-300 rounded-sm shadow-xl z-20"},Ee=e("hr",null,null,-1),Fe={class:"grid grid-cols-3 gap-x-4 mt-2"},Oe={class:"col-span-1"},qe={class:"flex justify-between"},De=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client Request ID:",-1),Te={class:"text-gray-600 text-sm md:text-md"},Ue={class:"flex justify-between"},Ve=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client:",-1),Be={class:"text-gray-600 text-sm md:text-md"},Ne=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800 text-sm font-semibold"},"Cliet Contact:"),e("span",{class:"text-gray-600 text-sm md:text-md"},"Sister in Charge")],-1),Ae={class:"col-span-1"},ze={class:"flex justify-between"},Me=e("span",{class:"text-gray-800 text-sm font-semibold"},"Tipo de Muestra:",-1),Je={class:"text-gray-600 text-sm md:text-md"},We={class:"flex justify-between"},Qe=e("span",{class:"text-gray-800 text-sm font-semibold"},"Fecha de Muestreo:",-1),Ge={class:"text-gray-600 text-sm md:text-md"},He={class:"flex justify-between"},Ke=e("span",{class:"text-gray-800 text-sm font-semibold"},"Fecha de Registro:",-1),Xe={class:"text-gray-600 text-sm md:text-md"},Ye={class:"flex justify-between"},Ze=e("span",{class:"text-gray-800 text-sm font-semibold"},"Fecha de Recibido:",-1),et={class:"text-gray-600 text-sm md:text-md"},tt={class:"col-span-1"},st={class:"flex justify-between"},at=e("span",{class:"text-gray-800 text-sm font-semibold"},"Fecha de Enviado:",-1),ot={class:"text-gray-600 text-sm md:text-md"},rt={class:"flex justify-between"},nt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Fecha de verificado:",-1),it={class:"text-gray-600 text-sm md:text-md"},dt={class:"flex justify-between"},lt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Fecha de Publicado:",-1),ct={class:"text-gray-600 text-sm md:text-md"},ut={class:"flex justify-between"},pt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Fecha de Impresion:",-1),mt={class:"text-gray-600 text-sm md:text-md"},vt={class:"bg-blue-300 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},yt={class:"flex"},xt=e("div",{class:"mr-4 font-semibold"},"Storage:",-1),ht={class:"bg-orange-600 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},ft=re({__name:"index",setup(bt){const $=ye(()=>xe(()=>import("./LoadingMessage-79e5e3e9.js"),["assets/LoadingMessage-79e5e3e9.js","assets/LoadingMessage.vue_vue_type_script_setup_true_lang-1ac11e1a.js","assets/index-7e8465c2.js","assets/index-fff21e38.css"])),u=ne(),b=ie(),k=de();u.resetSample();const{cancelSamples:I,reInstateSamples:P,receiveSamples:E,invalidateSamples:F,publishSamples:O,verifySamples:q,recoverSamples:D,printSamples:T}=he(),x=le({dropdownOpen:!1}),{sample:t,fetchingSample:U,repeatSample:_}=ce(u);u.fetchSampleByUid(b.params.sampleUid),R(()=>t?.value?.status,(r,a)=>{if(r)if(r!=="invalidada"){u.resetRepeatSample();return}else u.fetchRepeatSampleByParentId(b.params.sampleUid)}),R(()=>b.params.sampleUid,(r,a)=>{u.fetchSampleByUid(+r)});function V(r,a){let p=[];return r?.forEach(y=>p.push(y.name)),a?.forEach(y=>p.push(y.name)),p.join(", ")}const B=l(()=>!!["esperada"].includes(t?.value?.status?.toLowerCase())),N=async()=>E([t?.value?.uid]),A=l(()=>!!["recibido","esperada"].includes(t?.value?.status?.toLowerCase())),z=async()=>I([t?.value?.uid]),M=l(()=>!!["cancelada"].includes(t?.value?.status?.toLowerCase())),J=async()=>P([t?.value?.uid]),W=l(()=>t?.value?.status?.toLowerCase()==="Esperando"),Q=async()=>q([t?.value?.uid]),G=l(()=>t?.value?.status?.toLowerCase()==="publicado"),g=l(()=>["aprobada"].includes(t?.value?.status?.toLowerCase())?"Publicar":["publicado"].includes(t?.value?.status?.toLowerCase())?"Re publicar":"Pre publicar"),S=l(()=>{if(["Esperando","aprobada","publicado"].includes(t?.value?.status?.toLowerCase()))return!0;const r=u.analysisResults;return!!(["recibido","paired"].includes(t?.value?.status?.toLowerCase()??"")&&r?.some(a=>["aprobada"].includes(a.status?.toLowerCase()??"")))}),H=async()=>{const r=g.value.startsWith("Pre")?"pre-publicar":g.value.startsWith("Re")?"re-publicar":"publicar";O([{uid:t?.value?.uid,action:r}])},K=async()=>F([t?.value?.uid]).then(r=>{let a=r?.filter(p=>p.uid!==t?.value?.uid);a.length>0&&u.setRepeatSample(a[0])}),X=l(()=>!!["recibido","esperada"].includes(t?.value?.status?.toLowerCase())),Y=async()=>k.push({name:"reject-samples",params:{samples:JSON.stringify([t?.value])}}),Z=async()=>T([t?.value?.uid]);l(()=>t?.value?.status?.toLowerCase()==="publicado");const ee=l(()=>!!["stored"].includes(t?.value?.status?.toLowerCase())),te=async()=>D([t?.value?.uid]),se=async r=>{k.push({path:"/bio-banking",state:{sample:JSON.stringify(r)}})};return(r,a)=>{const p=f("router-link"),y=f("font-awesome-icon"),ae=f("router-view"),oe=ue("motion-slide-right");return c(),m(L,null,[e("div",be,[_e,s(t)?.analysisRequest?.patient?.uid?(c(),pe(p,{key:0,to:{name:"patient-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:j(()=>[w(" ... otras muestras ")]),_:1},8,["to"])):C("",!0)]),ge,i((c(),m("div",fe,[s(U)?(c(),m("div",we,[h(s($),{message:"Cargando detalles de muestra ..."})])):(c(),m("div",Ce,[e("div",ke,[e("div",Se,[e("div",null,[s(t)?.priority??0<1?(c(),m("span",{key:0,class:me(["font-small",{"text-orange-600":s(t)?.priority??0<1}])},je,2)):C("",!0),w(" "+o(s(t)?.sampleId)+" ",1),s(t)?.analysisRequest?.patient?.uid&&s(_)?.uid?(c(),m("span",Le,[h(y,{icon:"angle-double-right",class:"mx-2"}),h(p,{to:{name:"sample-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid,sampleUid:s(_)?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:j(()=>[w(o(s(_)?.sampleId),1)]),_:1},8,["to"])])):C("",!0)]),e("span",null,o(V(s(t)?.profiles,s(t)?.analyses)),1),e("div",null,[e("div",{onClick:a[0]||(a[0]=n=>x.dropdownOpen=!x.dropdownOpen),class:"hidden md:block md:flex md:items-center ml-2 mt-2"},[e("button",$e,o(s(t)?.status),1),e("div",Ie,[h(y,{icon:"chevron-down",class:"text-gray-400"})])]),i(e("div",{onClick:a[1]||(a[1]=n=>x.dropdownOpen=!1),class:"fixed inset-0 h-full w-full z-10"},null,512),[[d,x.dropdownOpen]]),i(e("div",Pe,[i(e("div",{onClick:a[2]||(a[2]=n=>N()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Recibir ",512),[[d,B.value]]),i(e("div",{onClick:a[3]||(a[3]=n=>Q()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Aprobar ",512),[[d,W.value]]),i(e("div",{onClick:a[4]||(a[4]=n=>Y()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Rechazar ",512),[[d,X.value]]),i(e("div",{onClick:a[5]||(a[5]=n=>z()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Cancelar ",512),[[d,A.value]]),i(e("div",{onClick:a[6]||(a[6]=n=>J()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reinstegrar ",512),[[d,M.value]]),i(e("div",{onClick:a[7]||(a[7]=n=>H()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"},o(g.value),513),[[d,S.value]]),i(e("div",{onClick:a[8]||(a[8]=n=>Z()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Imprimir ",512),[[d,S.value]]),i(e("div",{onClick:a[9]||(a[9]=n=>K()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Invalidar ",512),[[d,G.value]]),i(e("div",{onClick:a[10]||(a[10]=n=>te()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Recuperar ",512),[[d,ee.value]])],512),[[d,x.dropdownOpen]])])]),Ee,e("div",Fe,[e("div",Oe,[e("div",qe,[De,e("span",Te,o(s(t)?.analysisRequest?.clientRequestId),1)]),e("div",Ue,[Ve,e("span",Be,o(s(t)?.analysisRequest?.client?.name),1)]),Ne]),e("div",Ae,[e("div",ze,[Me,e("span",Je,o(s(t)?.sampleType?.name),1)]),e("div",We,[Qe,e("span",Ge,o(s(v)(s(t)?.dateCollected,!0)),1)]),e("div",He,[Ke,e("span",Xe,o(s(v)(s(t)?.createdAt,!0)),1)]),e("div",Ye,[Ze,e("span",et,o(s(v)(s(t)?.dateReceived,!0)),1)])]),e("div",tt,[e("div",st,[at,e("span",ot,o(s(v)(s(t)?.dateSubmitted,!0)),1)]),e("div",rt,[nt,e("span",it,o(s(v)(s(t)?.dateVerified,!0)),1)]),e("div",dt,[lt,e("span",ct,o(s(v)(s(t)?.datePublished,!0)),1)]),e("div",ut,[pt,e("span",mt,o(s(v)(s(t)?.datePrinted,!0)),1)])])])])]))])),[[oe]]),i(e("div",vt,[e("div",yt,[xt,e("div",{class:"hover:underline hover:cursor-pointer",onClick:a[11]||(a[11]=n=>se(s(t)))},[e("span",null,o(s(t)?.storageContainer?.storageSection?.storageLocation?.storeRoom?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.storageSection?.storageLocation?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.storageSection?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.name)+" › ",1),e("span",null,o(s(t)?.storageSlot),1)])])],512),[[d,s(t)?.status==="stored"]]),i(e("div",ht,[e("ul",null,[(c(!0),m(L,null,ve(s(t)?.rejectionReasons,n=>(c(),m("li",{key:n.uid},o(n.reason),1))),128))])],512),[[d,s(t)?.status==="rejected"]]),h(ae)],64)}}});export{ft as default};
