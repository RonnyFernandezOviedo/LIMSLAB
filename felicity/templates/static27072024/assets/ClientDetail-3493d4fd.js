import{d as A,al as D,af as B,L as j,r as b,o as r,c as m,b as e,f as c,v as x,F as N,y as I,x as u,u as a,e as F,i as f,N as y,w as U,H as g,G as q,I as L,B as G,t as $,n as z}from"./index-7e8465c2.js";import{_ as H}from"./SampleListing.vue_vue_type_script_setup_true_lang-83ffc809.js";import{_ as J}from"./LoadingMessage.vue_vue_type_script_setup_true_lang-1ac11e1a.js";import K from"./SimpleModal-16734371.js";import{D as Q,a as W,b as X}from"./clients.mutations-4a0a1e4b.js";import{h as v,o as k,a as w}from"./constants-71a97445.js";import{_ as Y}from"./AuditLog.vue_vue_type_script_setup_true_lang-adb5ebef.js";import"./samples-4e71fb6f.js";const Z={class:"overflow-x-auto"},ee={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},te={class:"min-w-full"},oe=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Nombre completo "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Email "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Telefono "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),se={class:"bg-white"},ae={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},le={class:"flex items-center"},ne={class:"text-sm leading-5 text-gray-800"},ie={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},re={class:"text-sm leading-5 text-sky-800"},de={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ce={class:"text-sm leading-5 text-sky-800"},ue={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},me=["onClick"],pe=["onClick"],be={key:0,class:"py-4 text-center"},fe={action:"post",class:"p-1"},_e={class:"grid grid-cols-2 gap-x-4 mb-4"},he={class:"block col-span-1 mb-2"},ge=e("span",{class:"text-gray-700"},"Nombre",-1),ye={class:"block col-span-1 mb-2"},Ce=e("span",{class:"text-gray-700"},"Apellido",-1),xe={class:"block col-span-1 mb-2"},ve=e("span",{class:"text-gray-700"},"Email",-1),ke={class:"block col-span-1 mb-2"},we=e("span",{class:"text-gray-700"},"Telefono",-1),Ne=e("hr",null,null,-1),Te=A({__name:"ContactTable",props:{clientUid:String},setup(P){let d=D(),l=B();const{withClientMutation:p}=G(),{clientContacts:_,fetchingClientContacts:T}=j(d);let C=b(""),n=b(!1),h=b(!1),t=b({});d.fetchClientContacts(l.query.clientUid);function R(){p(W,{payload:{clientUid:l.query.clientUid,firstName:t.value.firstName,lastName:t.value.lastName,mobilePhone:t.value.mobilePhone,email:t.value.email}},"createClientContact").then(i=>d.addClientContact(i))}function M(){p(X,{uid:t.value.uid,payload:{clientUid:l.query.clientUid,firstName:t.value.firstName,lastName:t.value.lastName,mobilePhone:t.value.mobilePhone,email:t.value.email}},"updateClientContact").then(i=>d.updateClientContact(i))}function E(i,o={}){h.value=i,C.value=(i?"CREAR":"EDITAR")+" CONTACTO",n.value=!0,i?Object.assign(t,{}):Object.assign(t.value,{...o})}function O(){h.value===!0&&R(),h.value||M(),n.value=!1}function V(i){p(Q,{uid:i},"deleteClientContact").then(o=>d.deleteClientContact(o?.uid))}return(i,o)=>(r(),m(N,null,[e("div",Z,[c(e("button",{onClick:o[0]||(o[0]=s=>E(!0)),class:"px-1 py-0 mb-4 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Agregar Contacto ",512),[[x,v(w.CREATE,k.CLIENT)]]),e("div",ee,[e("table",te,[oe,e("tbody",se,[(r(!0),m(N,null,I(a(_),s=>(r(),m("tr",{key:s.uid},[e("td",ae,[e("div",le,[e("div",null,[e("div",ne,u(s.firstName)+" "+u(s.lastName),1)])])]),e("td",ie,[e("div",re,u(s.email),1)]),e("td",de,[e("div",ce,u(s.mobilePhone),1)]),e("td",ue,[c(e("button",{onClick:S=>E(!1,s),class:"px-2 py-1 mr-2 border-gray-500 border text-orange-500rounded-smtransition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"}," Editar ",8,me),[[x,v(w.UPDATE,k.CLIENT)]]),c(e("button",{onClick:S=>V(s?.uid),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500rounded-smtransition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Eliminar ",8,pe),[[x,v(w.UPDATE,k.CLIENT)]])])]))),128))])]),a(T)?(r(),m("div",be,[F(J,{message:"Recopilando contactos de clientes ..."})])):f("",!0)])]),a(n)?(r(),y(K,{key:0,onClose:o[6]||(o[6]=s=>L(n)?n.value=!1:n=!1)},{header:U(()=>[e("h3",null,u(a(C)),1)]),body:U(()=>[e("form",fe,[e("div",_e,[e("label",he,[ge,c(e("input",{class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":o[1]||(o[1]=s=>a(t).firstName=s),placeholder:"Nombre completo..."},null,512),[[g,a(t).firstName]])]),e("label",ye,[Ce,c(e("input",{class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":o[2]||(o[2]=s=>a(t).lastName=s),placeholder:"Nombre completo..."},null,512),[[g,a(t).lastName]])]),e("label",xe,[ve,c(e("input",{class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":o[3]||(o[3]=s=>a(t).email=s),placeholder:"Email ..."},null,512),[[g,a(t).email]])]),e("label",ke,[we,c(e("input",{class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":o[4]||(o[4]=s=>a(t).mobilePhone=s),placeholder:"Telefono ..."},null,512),[[g,a(t).mobilePhone]])])]),Ne,e("button",{type:"button",onClick:o[5]||(o[5]=q(s=>O(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Guardar forma ")])]),_:1})):f("",!0)],64))}}),Ee={class:"col-span-12"},Ue={class:"bg-white shadow-md mt-2"},$e={class:"-mb-px flex justify-start"},Ae=["onClick"],De={class:"pt-4"},Be=A({__name:"ClientDetail",setup(P){const d=D();let l=b("Muestras");const p=["Muestras","Contactos","logs"];$(()=>"tab-"+l.value);let _=$(()=>d.getClient);return(T,C)=>(r(),m("section",Ee,[e("nav",Ue,[e("div",$e,[(r(),m(N,null,I(p,n=>e("a",{key:n,class:z(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":a(l)===n}]),onClick:h=>L(l)?l.value=n:l=n},u(n),11,Ae)),64))])]),e("div",De,[a(l)==="Muestras"?(r(),y(H,{key:0})):f("",!0),a(l)==="Contactos"?(r(),y(Te,{key:1,clientUid:a(_)?.uid},null,8,["clientUid"])):f("",!0),a(l)==="logs"?(r(),y(Y,{key:2,targetType:"client",targetId:a(_)?.uid},null,8,["targetId"])):f("",!0)])]))}});export{Be as default};
