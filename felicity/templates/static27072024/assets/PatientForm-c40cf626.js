import{d as L,t as o,al as j,P as G,O as Q,E as z,af as H,Q as P,s as J,ao as K,o as c,c as d,b as i,e as W,u as s,I as b,f as U,aa as S,F as x,y as B,x as N,G as X,b7 as Y,B as Z}from"./index-7e8465c2.js";import ee from"./vue-multiselect.esm-16295834.js";import{A as te,U as ae}from"./patient.mutations-cc33551a.js";import{c as k,d as ie,a as _,f as se,u as ne,b as m}from"./array-631ae7c2.js";/* empty css                                                                 */const oe={class:"flex whitespace-nowrap mb-2 w-full"},le=i("span",{class:"text-gray-700 w-4/12"},"Cliente",-1),re={class:"w-full"},ue={class:"flex whitespace-nowrap mb-2 w-full"},ce=i("span",{class:"text-gray-700 w-4/12"},"Contacto de Cliente",-1),de={class:"w-full"},me=i("option",{value:""},null,-1),fe=["value"],pe=i("option",{value:""},null,-1),ve=["value"],he={class:"text-orange-600 w-4/12"},be=i("hr",{class:"my-2"},null,-1),Ne=i("hr",null,null,-1),_e=i("button",{type:"submit",class:"-mb-4 w-1/5 border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Crear Solcitud ",-1),Ue=L({__name:"PatientForm",props:{patient:Object,navigate:{type:Boolean,default:!1}},emits:["close"],setup(V,{emit:A}){const D=o(()=>r.getClients);function F(e){Y(e)&&r.fetchClientContacts(e?.uid)}const C=o(()=>r.getClientContacts),l=V,w=A;let r=j(),n=G(),f=Q();const{withClientMutation:y}=Z();let I=z();H(),P({genders:["Male","Female"],createAction:!0,countries:o(()=>n.getCountries),provinces:o(()=>n.getProvinces),districts:o(()=>n.getDistricts),clients:o(()=>r.getClients)});let q=P({first:void 0,after:"",text:"",sortBy:["name"],filterAction:!1});J(async()=>{await n.fetchCountries(),await r.fetchClients(q),l.patient?.countryUid&&await n.filterProvincesByCountry(l.patient?.countryUid),l.patient?.provinceUid&&await n.filterDistrictsByProvince(l.patient?.provinceUid),await f.fetchIdentifications()});const{patient:u,navigate:E}=K(l),M=k({uid:ie(),patientId:_().nullable(),firstName:_().required("Nombre es requerido"),lastName:_().required("Apellido es requerido"),client:k().required("Cliente es requerido"),dateOfBirth:se().nullable()}),{handleSubmit:O,errors:T}=ne({validationSchema:M,initialValues:{uid:u?.value?.uid,patientId:u?.value?.patientId,firstName:u?.value?.firstName,lastName:u?.value?.lastName,client:u?.value?.client}}),{value:p}=m("firstName"),{value:v}=m("lastName"),{value:h}=m("client");m("provinceUid"),m("countryUid");const g=O(e=>{e.uid||R(e),e.uid&&$(e)});function R(e){y(te,{payload:{firstName:e.firstName,lastName:e.lastName,clientUid:e.client.uid}},"createPatient").then(t=>{f.addPatient(t),w("close",t),E.value===!0&&I.push({name:"patient-detail",params:{patientUid:t.uid}})})}function $(e){y(ae,{uid:e.uid,payload:{firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,clientUid:e.client.uid}},"updatePatient").then(t=>{f.updatePatient(t),w("close",t)})}return(e,t)=>(c(),d("form",{onSubmit:t[3]||(t[3]=X((...a)=>s(g)&&s(g)(...a),["prevent"])),class:"border-2 border-gray-900 border-dotted rounded-sm px-4 py-8",autocomplete:"off"},[i("label",oe,[le,i("div",re,[W(s(ee),{placeholder:"Select a Client",modelValue:s(h),"onUpdate:modelValue":t[0]||(t[0]=a=>b(h)?h.value=a:null),options:D.value,searchable:!0,label:"name","track-by":"uid",onSelect:F},null,8,["modelValue","options"])])]),i("label",ue,[ce,i("div",de,[U(i("select",{name:"clientContacts",id:"clientContacts","onUpdate:modelValue":t[1]||(t[1]=a=>b(p)?p.value=a:null),class:"form-input mt-1 block w-full"},[me,(c(!0),d(x,null,B(C.value,a=>(c(),d("option",{key:a.uid,value:a.firstName},N(a.firstName),9,fe))),128))],512),[[S,s(p)]]),U(i("select",{name:"clientContacts",id:"clientContacts","onUpdate:modelValue":t[2]||(t[2]=a=>b(v)?v.value=a:null),class:"form-input mt-1 block w-full"},[pe,(c(!0),d(x,null,B(C.value,a=>(c(),d("option",{key:a.uid,value:a.lastName},N(a.lastName),9,ve))),128))],512),[[S,s(v)]]),i("div",he,N(s(T).clientContactUid),1)])]),be,Ne,_e],32))}});export{Ue as default};
